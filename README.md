# BrawlDraft — Ranked Draft Helper

Чистый HTML/CSS/JS SPA для Ranked Draft в Brawl Stars. Темный неон, 6 экранов, офлайн через PWA, автодеплой на GitHub Pages.

## Что есть
- 6 экранов без перезагрузки: Главная → Ранг → Режим → Карта → Порядок пика → Рекомендации.
- Ранги сохраняются в `localStorage`, быстрый флоу выбора.
- Актуальная мета конца 2025 с баффи (Shelly, Colt, Spike, Emz, Frank, Mortis приоритизированы).
- Баны, пики (с ролями, контрит/слаб против), альтернативы, учёт порядка пика.
- PWA: `manifest.json`, `service-worker.js` для офлайна. Иконки в `icons/`, изображения бойцов/карт — `images/brawlers` и `images/maps` (добавьте свои PNG; есть onerror-эмодзи).
- GitHub Actions автодеплой в `gh-pages` через `peaceiris/actions-gh-pages`.

### Имена файлов картинок
- Бойцы: подходят варианты `shelly.png`, `shelly_portrait.png`, `shelly-portrait.png` (регистр не важен).  
- Карты: работает `Dry Season.png`, `dry season.png`, `dry_season.png` и `dry-season.png`.
- Ранги/режимы: используются готовые PNG из `icons/` (Bronze…Pro, bounty_icon и т.д.).

### Логика AI-драфта
- Учитывает теги карты (открытая, кусты, choke, стены, снайперы), теги режима и роль бойца.
- Веса по глобальному тир-листу февраля 2026 (с баффи Shelly/Colt/Spike/Emz/Frank/Mortis, Kit/Cordelius top-tiers) — пики/баны отличаются по рангу.
- Порядок пика: если враг выбирает первым, наверх поднимаются безопасные и баффнутые пики, уменьшается вес уязвимых.

## Подключение API Brawl Stars (статы по тегу)
- Нужен серверный прокси с токеном. В репозитории есть пример `proxy/worker.js` (Cloudflare Workers).
- Есть простой локальный вариант `proxy/token-proxy.js`: вставь токен в `BRAWL_TOKEN` (или в env), запусти `node proxy/token-proxy.js`, добавь IP сервера в Allowed IPs, а во фронте укажи `PROXY_URL` на `http://<server>:8787/proxy`.
- Где хранить токен: в секрете `BRAWL_TOKEN` (Workers → Settings → Variables). Токен не кладём в фронт/репозиторий.
- IP: на developer.brawlstars.com добавьте egress IP вашего хостинга (или используйте VPS с фиксированным IP).
- Как дергать из фронта: замените в `app.js` константу `PROXY_URL` (см. ниже).
- Картинки: добавлены копии карт/бравлеров с slug-именами (lowercase, underscore), чтобы на GitHub Pages не было проблем с регистром.

## Баффи (декабрь 2025)
- Shelly: оба гаджета с автонаводкой; рывок с неуязвимостью; Супер поджигает; ускорение после лечения; гипер — быстрые снаряды. Топ в Броулболе и Нокауте.
- Colt: гаджеты с замедлением и кражей патронов; усиленные пули; ускорение при уроне; гипер — скорость пуль. Топ-пик в Награде и Нокауте.
- Spike: обездвиживание при 3 шипах; бросковой хиловый кактус; лечение от Супера; двойная волна гипера. Сильнейший в Захвате и Горячей Зоне.
- Emz: прицельные спреи, отталкивание/оглушение, замедление через стены; 1 сек неуязвимости при Супере; гипер отравляет. Сильна в Захвате и Горячей Зоне.
- Frank: прицельная волна, уничтожает снаряды, устойчив к CC; наводимый второй гаджет. Силен в Броулболе и Ограблении.
- Mortis: переработанные гаджеты и контроль дистанции. Усилен в Броулболе и Нокауте.

## Быстрый старт локально
1) Склонируйте репозиторий.  
2) Откройте `index.html` в браузере (или `npx serve .`).  
3) Проверьте навигацию и кеш PWA (перезагрузите в офлайне).

## Деплой на GitHub Pages (3 шага)
1) Создайте репозиторий на GitHub и запушьте код в ветку `main`.  
2) Разрешите GitHub Actions в Settings → Actions (по умолчанию включено).  
3) В Settings → Pages выберите источник `Deploy from a branch`, ветку `gh-pages`. Workflow `.github/workflows/deploy.yml` сам соберет и опубликует сайт при каждом push в `main`.

## Структура
- `index.html` — разметка экранов SPA.
- `style.css` — тема, анимации, адаптив до 600px.
- `data.js` — карты, режимы, мета (баны/пики/альты) с баффи.
- `app.js` — логика навигации, рендер экранов, сервис-воркер регистрация.
- `manifest.json`, `service-worker.js` — PWA.
- `icons/` — SVG-иконки PWA. `images/brawlers`, `images/maps` — положите PNG.
- `.github/workflows/deploy.yml` — автодеплой на GitHub Pages.
